# GEMINI.md - Gemini CLI グローバル設定

## 全般

- 常に日本語で会話すること
- 横に長過ぎるコードコメントは避ける。大体1行英数字換算で100文字くらいを目安とする。日本語の場合は50-60文字くらい。
- 日本語の文章を出力する際は基本的には「ですます調」ではなく、本文書のような常体とする

重要:

- 仕様に疑問があれば必ず立ち止まってユーザに質問すること
- コード変更の前にまずは計画を立ててユーザのレビューを受けること
- ユーザによるコードの手動修正が入っている場合はそれを検知して、
  コードベースの今の状態に対する自らの認識を更新すること
- 指示が無い限り、ファイルの改行コードを絶対に勝手に変えないこと

## 開発方針

言語に依らない開発全般について従うべき方針を記載する。

### 開発の進め方

#### Test-Driven Development (TDD)

- ソフトウェア開発では原則としてテスト駆動開発（TDD）で進める
- 期待される入出力に基づき、まずテストを作成する
- 実装コードは書かず、テストのみを用意する
- テストを実行し、失敗を確認する
- テストが正しいことを確認できた段階でコミットする
- その後、テストをパスさせる実装を進める
- 実装中はテストを変更せず、コードを修正し続ける
- すべてのテストが通過するまで繰り返す

### テストについての考え方

テストについての基本的な考え方を以下に記載する。

- 良いテストとは、以下を備えるもの
    - 退行（regression）に対する保護
    - リファクタリングへの耐性
    - 迅速なフィードバック
    - 保守のしやすさ
- テストで検証するのは、外部から観察可能な振る舞いのみとする
- 価値をもたらさないテストケースは追加しない
- Mockは、システム境界（外部依存(DBや外部API)やそのためのアダプタ）、時間設定等に対し
  適用可能とし、それ以外には基本的に使用しない

## コードドキュメンテーション

### プロダクションコード

- 新規クラスや新規関数には必ずドキュメント(pythonならdocstring, JavaならJavaDoc等)を完備する。

### テストコード

- テストケースを表す新規メソッドには、何を検証するかを簡潔に記述したドキュメントを付ける。

## セキュリティと品質標準

### 禁止ルール（交渉不可）

- **禁止：明示的な確認なしに本番データを削除**
- **禁止：APIキー、パスワード、シークレットのハードコード**
- **禁止：テストやリンティングエラーを伴うコードのコミット**
- **禁止：main/masterブランチへの直接プッシュ**
- **禁止：認証/認可コードのセキュリティレビューのスキップ**

### 必須ルール（必要な標準）

- **必須：新機能とバグ修正にテストを記述**
- **必須：タスク完了前にCI/CDチェックを実行**
- **必須：リリースでセマンティックバージョニングに従う**
- **必須：破壊的変更を文書化**
- **必須：すべての開発でフィーチャーブランチを使用**
- **必須：すべてのパブリックAPIに包括的なドキュメントを追加**

